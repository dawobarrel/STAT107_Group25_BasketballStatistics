knitr::opts_chunk$set(echo = TRUE)
library(here)
# Load cleaned dataset
load(here::here("data", "nba2024_cleaned.RData"))
View(clean_data)
knitr::opts_chunk$set(echo = TRUE)
df <- clean_data  # just for convenience
# 1) Flag rows that are a TOTAL row (2TM, 3TM, 4TM, ...)
is_total <- grepl("^[0-9]TM$", df$team)
# 2) For each player, check if they have ANY total row
has_total <- ave(is_total, df$player, FUN = any)
# 3) Keep:
#    - total rows (is_total == TRUE), OR
#    - all rows for players who don't have a total row (has_total == FALSE)
keep <- (!has_total) | is_total
clean_data_totals <- df[keep, ]
rm(clean_data_totals)
rm(df)
remove(has_total)
remove(is_total)
remove(keep)
df <- clean_data  # for convenience
# 1) Flag rows that are total season rows (2TM, 3TM, etc.)
is_total <- grepl("^[0-9]TM$", df$Team)
# 2) For each player, check if they have ANY total row
has_total <- ave(is_total, df$Player, FUN = any)
# 3) Keep:
#    - total rows, OR
#    - rows for players who do NOT have a total row
keep <- (!has_total) | is_total
clean_data_totals <- df[keep, ]
rm(clean_data_totals)
rm(df)
rm(has_total)
rm(is_total)
rm(keep)
# Identify total rows such as 2TM, 3TM, etc.
is_total <- grepl("^[0-9]TM$", clean_data$Team)
# Check if each player has at least one total row
has_total <- ave(is_total, clean_data$Player, FUN = any)
# Keep either:
# - total rows, OR
# - rows for players who do NOT have a total row
keep <- (!has_total) | is_total
# Overwrite clean_data
clean_data <- clean_data[keep, ]
# Total missing values
sum(is.na(clean_data))
# Missing values by column
colSums(is.na(clean_data))
# Count duplicate rows
sum(duplicated(clean_data))
# Full summary of numerical variables
skimr::skim(clean_data)
save(clean_data, file = here::here("data", "nba2024_cleaned.RData"))
knitr::opts_chunk$set(echo = TRUE)
library(here)
# Load cleaned dataset
load(here::here("data", "nba2024_cleaned.RData"))
